<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>ASCII WEBCAM</title>
    <meta name="author" content="Hugo Paulista">
    <!-- compuuter screen emoji  favicon  -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 fill=%22%23000%22/><text x=%2250%22 y=%2265%22 font-family=%22monospace%22 font-size=%2280%22 text-anchor=%22middle%22 fill=%22%2300FF41%22>ðŸ’»</text></svg>">
    <meta name="description" content="ASCII WEBCAM">
    <meta name="keywords" content="ASCII, WEBCAM, MATRIX, CYBERPUNK, HACKER, RETRO, VINTAGE">
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <style>
    html, body {
      overflow: visible;
    }

    body {
      background: #000000;
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    #ascii-container, #ascii-container-p5 {
      overflow: visible;
      max-width: 1280px;
      max-height: 720px;
      display: flex;
      justify-content: center;
      align-items: center;
      pointer-events: none;
    }

    span {
      font-family: Courier, serif;
      font-size: 16px;
      line-height: 6px;
      color: #00FF41;
      display: inline-block;
      white-space: pre;
    }

    /* Custom slider styling */
    .slider::-webkit-slider-thumb {
      appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: linear-gradient(135deg, #008F11, #00FF41);
      cursor: pointer;
      box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
    }

    .slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: linear-gradient(135deg, #008F11, #00FF41);
      cursor: pointer;
      border: none;
      box-shadow: 0 0 10px rgba(0, 255, 65, 0.5);
    }

    #config-menu {
      top: 1.5rem;
      bottom: 1.5rem;
      right: 1.5rem;
      width: clamp(22rem, 38vw, 30rem);
      max-height: calc(100vh - 3rem);
      overflow-y: auto;
      transform: translateX(110%);
      border-radius: 1.25rem;
    }

    #config-menu.is-open {
      transform: translateX(0);
    }

    .settings-row {
      display: flex;
      gap: 1rem;
    }

    .settings-cell {
      flex: 1 1 0;
      min-width: 0;
    }

    @media (max-width: 900px) {
      #config-menu {
        width: clamp(20rem, 56vw, 26rem);
      }
    }

    @media (max-width: 640px) {
      #config-toggle {
        bottom: 1rem;
        right: 1rem;
        padding: 0.75rem;
      }

      #config-menu {
        left: 1rem;
        right: 1rem;
        top: auto;
        bottom: 1rem;
        width: auto;
        max-height: min(70vh, 520px);
        transform: translateY(110%);
      }

      #config-menu.is-open {
        transform: translateY(0);
      }

      .settings-row {
        flex-direction: column;
      }
    }

    .tab-button {
      position: relative;
      padding-bottom: 0.35rem;
      color: #9CA3AF;
      transition: color 200ms ease;
      cursor: pointer;
    }

    .tab-button::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: 0;
      width: 100%;
      height: 2px;
      background: linear-gradient(90deg, #00FF41, #00A63D);
      transform: scaleX(0);
      transform-origin: left;
      transition: transform 220ms ease;
    }

    .tab-button:hover {
      color: #E5E7EB;
    }

    .tab-button:hover::after,
    .tab-button.is-active::after {
      transform: scaleX(1);
    }

    .tab-button.is-active {
      color: #E5E7EB;
    }

    .top-panel {
      background: rgba(13, 2, 8, 0.92);
      border: 1px solid rgba(0, 255, 65, 0.18);
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.45);
      backdrop-filter: blur(8px);
      pointer-events: auto;
    }

    .upload-card {
      background: rgba(9, 16, 12, 0.95);
      border: 1px solid rgba(0, 255, 65, 0.25);
    }
  </style>

  <body>
    <div class="fixed top-6 left-6 z-50 inline-flex flex-col rounded-2xl px-4 py-4 top-panel">
      <div class="flex items-center gap-6">
        <button id="tab-camera" type="button" class="tab-button is-active inline-flex items-center gap-2 text-sm font-semibold tracking-[0.22em] uppercase">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="currentColor">
            <path d="M4 7a3 3 0 0 0-3 3v7a3 3 0 0 0 3 3h16a3 3 0 0 0 3-3v-7a3 3 0 0 0-3-3h-2.2a1 1 0 0 1-.8-.4l-1.4-1.8A2 2 0 0 0 13.2 4h-2.4a2 2 0 0 0-1.6.8L7.8 6.6a1 1 0 0 1-.8.4H4Zm8 3.5a3.5 3.5 0 1 1 0 7 3.5 3.5 0 0 1 0-7Z"/>
          </svg>
          Camera
        </button>
        <button id="tab-image" type="button" class="tab-button inline-flex items-center gap-2 text-sm font-semibold tracking-[0.22em] uppercase">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="currentColor">
            <path d="M5 4a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V9.5A2.5 2.5 0 0 0 19.5 7H12l-1.3-1.3A2.5 2.5 0 0 0 8.9 5H5Zm3.5 6a2 2 0 1 1 0 4 2 2 0 0 1 0-4Zm-3.5 7 4.5-4.5 3.2 3.2L15.5 13 20 17v1H5Z"/>
          </svg>
          Image
        </button>
      </div>

      <div id="image-upload-panel" class="mt-4 hidden">
        <div class="upload-card rounded-xl px-4 py-4">
          <label class="text-xs uppercase tracking-[0.2em] text-gray-400 block mb-3">Upload Image</label>
          <input id="image-upload" type="file" accept="image/*" class="block w-full text-xs text-gray-300 file:mr-3 file:rounded-full file:border-0 file:bg-[#00FF41]/15 file:px-4 file:py-2 file:text-xs file:font-semibold file:text-[#00FF41] file:shadow-[0_6px_16px_rgba(0,255,65,0.2)] hover:file:bg-[#00FF41]/25" />
          <div id="image-empty-message" class="mt-3 hidden rounded-lg border border-[#00FF41]/20 bg-[#0D0208]/90 px-3 py-2 text-xs text-gray-300 shadow-[0_10px_30px_rgba(0,0,0,0.35)]">
            No image selected. Upload a file to render ASCII art.
          </div>
        </div>
      </div>
    </div>

    <!-- Config Menu Toggle Button -->
    <div class="fixed right-6 top-6 z-50">
      <button id="config-toggle" class="relative inline-flex h-10 w-10 items-center justify-center rounded-full bg-black text-white transition-colors duration-200 hover:text-white" aria-label="Settings">
        <span id="settings-icon-open" class="absolute inset-0 flex items-center justify-center transition-all duration-200 ease-out opacity-100 scale-100">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="#ffffff" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          </svg>
        </span>
        <span id="settings-icon-close" class="absolute inset-0 hidden items-center justify-center transition-all duration-200 ease-out opacity-0 scale-75">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" viewBox="0 0 24 24" fill="none" stroke="#ffffff" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 6l12 12M18 6l-12 12" />
          </svg>
        </span>
      </button>
    </div>

    <!-- Config Menu Panel -->
    <div id="config-menu" class="fixed z-40 bg-[#0D0208]/95 backdrop-blur-lg border border-[#003B00] shadow-2xl p-6 transition-transform duration-300">
      <h2 class="text-2xl font-bold text-white mb-6 bg-gradient-to-r from-[#008F11] to-[#00FF41] bg-clip-text text-transparent">Settings</h2>
      
      <!-- Font Size Slider -->
      <div class="mb-6">
        <label class="flex items-center justify-between text-gray-300 text-sm font-medium mb-2">
          <p>Width</p>
          <p id="font-size-value" class=" font-mono">16px</p>
        </label>
        <input type="range" id="font-size" min="4" max="32" value="16" step="1" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider">
      </div>

      <!-- Line Height Slider -->
      <div class="mb-6">
        <label class="flex items-center justify-between text-gray-300 text-sm font-medium mb-2">
          <p>Height</p>
          <p id="line-height-value" class=" font-mono">6px</p>
        </label>
        <input type="range" id="line-height" min="2" max="32" value="6" step="1" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider">
      </div>

      <div class="settings-row mb-6">
        <!-- Text Color -->
        <div class="settings-cell">
          <label class="text-gray-300 text-sm font-medium mb-2 block">Text Color</label>
          <div class="flex items-center gap-3">
            <input type="color" id="text-color" value="#00FF41" class="w-14 h-14 rounded-lg cursor-pointer border-2 border-[#003B00] bg-[#0D0208]">
            <p id="color-value" class="text-gray-400 font-mono text-xs">#00FF41</p>
          </div>
        </div>

        <!-- Background Color -->
        <div class="settings-cell">
          <label class="text-gray-300 text-sm font-medium mb-2 block">Background</label>
          <div class="flex items-center gap-3">
            <input type="color" id="bg-color" value="#000000" class="w-14 h-14 rounded-lg cursor-pointer border-2 border-[#003B00] bg-[#0D0208]">
            <p id="bg-color-value" class="text-gray-400 font-mono text-xs">#000000</p>
          </div>
        </div>

        <!-- Orientation -->
        <div class="settings-cell">
          <label class="text-gray-300 text-sm font-medium mb-2 block">Orientation</label>
          <div class="flex flex-col gap-2">
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="checkbox" id="flip-h" class="w-4 h-4 rounded border-gray-600 bg-gray-700 text-[#00FF41] focus:ring-[#00FF41]">
              <span class="text-gray-300 text-xs">Flip H</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input type="checkbox" id="flip-v" class="w-4 h-4 rounded border-gray-600 bg-gray-700 text-[#00FF41] focus:ring-[#00FF41]">
              <span class="text-gray-300 text-xs">Flip V</span>
            </label>
          </div>
        </div>
      </div>

      <!-- Shape Selector -->
      <div class="mb-6">
        <label class="text-gray-300 text-sm font-medium mb-2 block">Shape</label>
        <select id="shape-select" class="w-full bg-gray-700 text-white border border-[#003B00] rounded-lg px-4 py-3 cursor-pointer focus:outline-none focus:ring-2 focus:ring-[#00FF41] transition-all">
          <option value="rectangle">Rectangle</option>
          <option value="square">Square</option>
          <option value="circle">Circle</option>
          <option value="triangle">Triangle</option>
          <option value="diamond">Diamond</option>
          <option value="pentagon">Pentagon</option>
          <option value="hexagon">Hexagon</option>
          <option value="octagon">Octagon</option>
        </select>
      </div>

      <!-- Pattern Selector -->
      <div class="mb-6">
        <label class="text-gray-300 text-sm font-medium mb-2 block">Pattern</label>
        <select id="pattern-select" class="w-full bg-gray-700 text-white border border-[#003B00] rounded-lg px-4 py-3 cursor-pointer focus:outline-none focus:ring-2 focus:ring-[#00FF41] transition-all">
          <option value="standard">Standard (Default)</option>
          <option value="simple">Simple (.:-=+*#%@)</option>
          <option value="minimal">Minimal (.coCO)</option>
          <option value="blocks">Blocks (â–‘â–’â–“â–ˆ)</option>
          <option value="matrix">Matrix (010101)</option>
          <option value="crt">CRT (Lines)</option>
          <option value="custom">Custom</option>
        </select>
      </div>

      <!-- Pattern Animation -->
      <div class="mb-6">
        <label class="text-gray-300 text-sm font-medium mb-2 block">Pattern Animation</label>
        <label class="flex items-center gap-3 cursor-pointer">
          <input type="checkbox" id="pattern-animate-toggle" class="w-4 h-4 rounded border-gray-600 bg-gray-700 text-[#00FF41] focus:ring-[#00FF41]">
          <span class="text-gray-300 text-xs">Cycle through patterns</span>
        </label>
      </div>

      <div class="mb-6">
        <label class="flex items-center justify-between text-gray-300 text-sm font-medium mb-2">
          <p>Pattern Speed</p>
          <p id="pattern-speed-value" class="font-mono">6s</p>
        </label>
        <input type="range" id="pattern-speed" min="2" max="20" value="6" step="1" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider">
      </div>

      <!-- Scatter -->
      <div class="mb-6">
        <label class="text-gray-300 text-sm font-medium mb-2 block">Scatter</label>
        <label class="flex items-center gap-3 cursor-pointer">
          <input type="checkbox" id="scatter-toggle" class="w-4 h-4 rounded border-gray-600 bg-gray-700 text-[#00FF41] focus:ring-[#00FF41]">
          <span class="text-gray-300 text-xs">Exploding characters</span>
        </label>
      </div>

      <div class="mb-6">
        <label class="flex items-center justify-between text-gray-300 text-sm font-medium mb-2">
          <p>Scatter Amount</p>
          <p id="scatter-amount-value" class="font-mono">20%</p>
        </label>
        <input type="range" id="scatter-amount" min="0" max="100" value="20" step="1" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider">
      </div>

      <div class="mb-6">
        <label class="flex items-center justify-between text-gray-300 text-sm font-medium mb-2">
          <p>Scatter Distance</p>
          <p id="scatter-distance-value" class="font-mono">60%</p>
        </label>
        <input type="range" id="scatter-distance" min="20" max="120" value="60" step="1" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider">
      </div>

      <!-- Bright Areas Only -->
      <div class="mb-6">
        <label class="text-gray-300 text-sm font-medium mb-2 block">Bright Areas</label>
        <label class="flex items-center gap-3 cursor-pointer">
          <input type="checkbox" id="bright-only-toggle" class="w-4 h-4 rounded border-gray-600 bg-gray-700 text-[#00FF41] focus:ring-[#00FF41]">
          <span class="text-gray-300 text-xs">Render only bright areas</span>
        </label>
      </div>

      <div class="mb-6">
        <label class="flex items-center justify-between text-gray-300 text-sm font-medium mb-2">
          <p>Brightness Sensitivity</p>
          <p id="bright-threshold-value" class="font-mono">60%</p>
        </label>
        <input type="range" id="bright-threshold" min="10" max="90" value="60" step="1" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider">
      </div>

      <!-- Density Slider -->
      <div class="mb-6">
        <label class="flex items-center justify-between text-gray-300 text-sm font-medium mb-2">
          <p>Density</p>
          <p id="density-value" class="font-mono">100%</p>
        </label>
        <input type="range" id="density" min="10" max="100" value="100" step="1" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider">
      </div>

      <!-- Glitch Toggle -->
      <div class="mb-6">
        <label class="text-gray-300 text-sm font-medium mb-2 block">Glitch</label>
        <label class="flex items-center gap-3 cursor-pointer">
          <input type="checkbox" id="glitch-toggle" class="w-4 h-4 rounded border-gray-600 bg-gray-700 text-[#00FF41] focus:ring-[#00FF41]">
          <span class="text-gray-300 text-xs">Enable glitch effect</span>
        </label>
      </div>

      <!-- Glitch Controls -->
      <div class="mb-6">
        <label class="flex items-center justify-between text-gray-300 text-sm font-medium mb-2">
          <p>Glitch Rate</p>
          <p id="glitch-rate-value" class="font-mono">50%</p>
        </label>
        <input type="range" id="glitch-rate" min="0" max="100" value="50" step="1" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider">
      </div>

      <div class="mb-6">
        <label class="flex items-center justify-between text-gray-300 text-sm font-medium mb-2">
          <p>Glitch Intensity</p>
          <p id="glitch-intensity-value" class="font-mono">50%</p>
        </label>
        <input type="range" id="glitch-intensity" min="0" max="100" value="50" step="1" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer slider">
      </div>

      <!-- Mouse Avoid Toggle -->
      <div class="mb-6">
        <label class="text-gray-300 text-sm font-medium mb-2 block">Mouse Avoid</label>
        <label class="flex items-center gap-3 cursor-pointer">
          <input type="checkbox" id="mouse-avoid-toggle" class="w-4 h-4 rounded border-gray-600 bg-gray-700 text-[#00FF41] focus:ring-[#00FF41]">
          <span class="text-gray-300 text-xs">Repel characters from cursor</span>
        </label>
      </div>

      <!-- Custom Pattern Input -->
      <div id="custom-pattern-wrapper" class="mb-6 hidden">
        <label class="text-gray-300 text-sm font-medium mb-2 block">Custom Pattern</label>
        <input id="custom-pattern" type="text" placeholder="e.g. .:-=+*#%@" class="w-full bg-gray-700 text-white border border-[#003B00] rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-[#00FF41] transition-all">
        <p class="text-gray-500 text-xs mt-2">Order matters: left = dark, right = bright.</p>
      </div>

      <!-- Reset Button -->
      <button id="reset-btn" class="w-full bg-green-700 hover:bg-green-800 text-white font-medium py-3 rounded-lg transition-all duration-300 hover:scale-105 shadow-lg">
        Reset to Defaults
      </button>
    </div>

    <!-- Export Button -->
    <button id="export-btn" class="fixed bottom-6 left-6 z-50 inline-flex h-11 w-11 items-center justify-center rounded-full border border-[#00FF41]/40 bg-black/80 text-[#00FF41] shadow-[0_10px_30px_rgba(0,0,0,0.45)] transition hover:bg-[#00FF41]/10 focus:outline-none focus:ring-2 focus:ring-[#00FF41]/60 sm:bottom-6 sm:left-6" type="button" aria-label="Export ASCII image">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
        <path d="M12 3a1 1 0 0 1 1 1v8.59l2.3-2.3a1 1 0 1 1 1.4 1.42l-4 4a1 1 0 0 1-1.4 0l-4-4a1 1 0 1 1 1.4-1.42L11 12.59V4a1 1 0 0 1 1-1z"/>
        <path d="M5 17a1 1 0 0 1 1 1v1h12v-1a1 1 0 1 1 2 0v2a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1z"/>
      </svg>
    </button>

    <!-- p5.js will create elements here -->
  </body>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <script src="./config.js"></script>
  <script src="./index.js"></script>
</html>
